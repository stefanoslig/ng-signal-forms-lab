<demo-layout>
  <form class="demo">
    <fieldset>
      <legend>Select the type of shipment:</legend>
      <div>
        <input [field]="shippingForm.shipmentType" type="radio" id="document" value="document" />
        <label class="ml-2" for="document">Document</label>
      </div>
      <div>
        <input [field]="shippingForm.shipmentType" type="radio" id="package" value="package" />
        <label class="ml-2" for="package">Package</label>
      </div>
    </fieldset>

    @if (shippingForm.shipmentType().value() === 'package') {
      <button
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full mb-4"
        type="button"
        (click)="addPackage()"
      >
        + Add Package
      </button>
      <fieldset>
        <legend>Packages</legend>
        @for (item of shippingForm.packages; track item; let idx = $index) {
          <div class="mb-2">
            <label class="input-label" for="description-{{ idx }}"> Description </label>
            <input
              [field]="item.description"
              class="input-field"
              id="description-{{ idx }}"
              type="text"
              placeholder="Description"
              autocomplete="description"
            />
            @for (error of shippingForm.packages[idx].description().errors(); track $index) {
              <p class="input-error">{{ error.message }}</p>
            }
          </div>
          <div class="flex">
            <div class="mb-2 mr-2">
              <label class="input-label" for="length-{{ idx }}"> Length </label>
              <input
                [field]="item.dimensions.length"
                class="input-field"
                id="length-{{ idx }}"
                type="number"
                placeholder="length"
                autocomplete="length"
              />
            </div>
            <div class="mb-2 mr-2">
              <label class="input-label" for="width-{{ idx }}"> Width </label>
              <input
                [field]="item.dimensions.width"
                class="input-field"
                id="width-{{ idx }}"
                type="number"
                placeholder="width"
                autocomplete="width"
              />
            </div>
            <div class="mb-2">
              <label class="input-label" for="height-{{ idx }}"> Height </label>
              <input
                [field]="item.dimensions.height"
                class="input-field"
                id="height-{{ idx }}"
                type="number"
                placeholder="height"
                autocomplete="height"
              />
            </div>
            @for (error of shippingForm.packages[idx].dimensions().errors(); track $index) {
              <p class="input-error">{{ error.message }}</p>
            }
          </div>
          <div class="mb-2 mr-2">
            <label class="input-label" for="weight-{{ idx }}"> Weight </label>
            <input
              [field]="item.weight"
              class="input-field"
              id="weight-{{ idx }}"
              type="number"
              placeholder="weight"
              autocomplete="weight"
            />
            @for (error of shippingForm.packages[idx].weight().errors(); track $index) {
              <p class="input-error">{{ error.message }}</p>
            }
          </div>
          <hr class="my-4 border-gray-300" />
        }
      </fieldset>
    } @else {
      <button
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full mb-4"
        type="button"
        (click)="addDocument()"
      >
        + Add Document
      </button>
      <fieldset>
        <legend>Documents</legend>
        @for (item of shippingForm.documents; track item; let idx = $index) {
          <div class="mb-2">
            <label class="input-label" for="doc-description-{{ idx }}"> Description </label>
            <input
              [field]="item.description"
              class="input-field"
              id="doc-description-{{ idx }}"
              type="text"
              placeholder="Description"
              autocomplete="description"
            />
            @for (error of shippingForm.documents[idx].description().errors(); track $index) {
              <p class="input-error">{{ error.message }}</p>
            }
          </div>
          <div class="mb-2 mr-2">
            <label class="input-label" for="doc-weight-{{ idx }}"> Weight </label>
            <input
              [field]="item.weight"
              class="input-field"
              id="doc-weight-{{ idx }}"
              type="number"
              placeholder="weight"
              autocomplete="weight"
            />
            @for (error of shippingForm.documents[idx].weight().errors(); track $index) {
              <p class="input-error">{{ error.message }}</p>
            }
          </div>
          <hr class="my-4 border-gray-300" />
        }
      </fieldset>
    }
  </form>
  <form-inspector class="inspector" [root]="shippingForm"></form-inspector>
</demo-layout>
